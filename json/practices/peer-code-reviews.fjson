{"parents": [], "prev": null, "next": null, "title": "How we use and conduct pull requests and peer code reviews", "meta": {}, "body": "<div class=\"section\" id=\"how-we-use-and-conduct-pull-requests-and-peer-code-reviews\">\n<h1>How we use and conduct pull requests and peer code reviews<a class=\"headerlink\" href=\"#how-we-use-and-conduct-pull-requests-and-peer-code-reviews\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>A so-called <em>peer code review</em> is in our case, a recurring action of having your code controlled for mistakes, errors or omissions by at least one (better more) colleagues before the code gets merged into the main code base. We believe code reviews lead to better code understanding by both parties, prevent malicious code from entering the code base and help to learn better coding skills for all participants. Additionally, it is a nice place for getting on board if you are new to the team.</p>\n<div class=\"section\" id=\"how-pull-requests-are-handled\">\n<h2>How pull requests are handled<a class=\"headerlink\" href=\"#how-pull-requests-are-handled\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Every code that ends in the code base of projects (at ZEIT ONLINE) has to be seen or controlled by at least four eyes. To apply this rule, we generally use code reviews on <em>pull requests</em> in GitHub.</p>\n<p>When we place a pull request against the master branch, we request a code review. The request is automatically posted to the suitable channel in <em>Slack</em>, for instance <em>#website</em>. Pull requests are also discussed and distributed for review by colleagues in a daily meeting, if necessary.</p>\n<p>The requester usually just places the PR (pull request), using a supplied pull request template if applicable. The <em>PR</em> contains information about:</p>\n<ul class=\"simple\">\n<li><p>what the PR does,</p></li>\n<li><p>where to start the review</p></li>\n<li><p>how things can be tested</p></li>\n<li><p>relevant stories or tickets</p></li>\n<li><p>and actions needed pre or post the deployment.</p></li>\n</ul>\n<p>The title of the PR should be usable as a copy-and-paste line for the record file of CHANGES of the project.</p>\n<p>The reviewer(s) conduct a code review using the review tools of GitHub and either comment inline, suggest changes or add code to the pull request itself in accordance with the original requester. After the pull request is approved, the (initial) reviewer adds the description of the change (at best the title of the PR) and pre or/and post-deploy actions to the <code class=\"docutils literal notranslate\"><span class=\"pre\">CHANGES.txt</span></code> of the project. After this, the reviewer merges the pull request. In some cases he also directly initiates a release and staging deployment and \u2013 if reasonable \u2013 informs the responsible person(s) for quality assurance purposes.</p>\n</div>\n<div class=\"section\" id=\"what-things-need-to-be-done-before-code-is-merged\">\n<h2>What things need to be done before code is merged<a class=\"headerlink\" href=\"#what-things-need-to-be-done-before-code-is-merged\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Discussions about the question <em>what has to be done in code reviews</em> almost always lead to the question <em>what rules, standards and qualities code should supply</em> before being pull requested or rather before being merged. The peer code review, on the one hand, controls if these qualities are found in the supplied code.</p>\n<div class=\"section\" id=\"all-code-should-be-tested\">\n<h3>All code should be tested<a class=\"headerlink\" href=\"#all-code-should-be-tested\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Though we most of the time don\u2019t follow the rules of test-driven development (when writing frontend code), all components on the website have to be tested for their functionality and acceptance.</p>\n</div>\n<div class=\"section\" id=\"all-code-must-be-valid\">\n<h3>All code must be valid<a class=\"headerlink\" href=\"#all-code-must-be-valid\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>All HTML and CSS must follow the applicable web standards.</p>\n</div>\n<div class=\"section\" id=\"the-outcome-must-work-in-all-targeted-browsers\">\n<h3>The outcome must work in all targeted browsers<a class=\"headerlink\" href=\"#the-outcome-must-work-in-all-targeted-browsers\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Requesters have to test their code on all targeted browsers regularly during development (we supply tools for this). Nonetheless, testing this again during the review in case of suspicion is good practice. Remember: the website needs to work in all browsers does explicitly not mean it has to look the same in all browsers.</p>\n</div>\n<div class=\"section\" id=\"the-coding-guidelines-must-be-followed\">\n<h3>The coding guidelines must be followed<a class=\"headerlink\" href=\"#the-coding-guidelines-must-be-followed\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>We supply our coding guidelines, most of the time these rules (and some more) are automatically enforced by linting during the build process.</p>\n</div>\n<div class=\"section\" id=\"the-definition-of-done-must-be-fulfilled\">\n<h3>The definition of done must be fulfilled<a class=\"headerlink\" href=\"#the-definition-of-done-must-be-fulfilled\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Does the code fulfill all points of the DoD is sometimes not a silly question.</p>\n</div>\n<div class=\"section\" id=\"the-non-functional-requirements-should-be-fulfilled\">\n<h3>The non-functional requirements should be fulfilled<a class=\"headerlink\" href=\"#the-non-functional-requirements-should-be-fulfilled\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>We implemented rules for writing better code and producing morally better websites or software by placing our non-functional requirements in the process. These rules involve things like placement of accessibility rules, use of progressive enhancement, better performance, some of the things listed above and additionally rules about tracking and search engine optimization.</p>\n</div>\n</div>\n<div class=\"section\" id=\"what-should-be-checked-during-code-review\">\n<h2>What should be checked during code review<a class=\"headerlink\" href=\"#what-should-be-checked-during-code-review\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>All the above things can be checked or rechecked during a review but there is more.</p>\n<div class=\"section\" id=\"is-the-code-comprehensible\">\n<h3>Is the code comprehensible?<a class=\"headerlink\" href=\"#is-the-code-comprehensible\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Does the code what is advertised? Is all the code needed to do this? Are there unused loops, missing ends, patterns used that are hard to understand or covering things up or hiding things?</p>\n<p>Walk through the code, follow the path of the program if applicable.</p>\n<p>It may also be tested if all code changes are correctly scoped to the task the code should obtain or if there are unrelated changes to other parts of the code.</p>\n</div>\n<div class=\"section\" id=\"test-for-complexity\">\n<h3>Test for complexity<a class=\"headerlink\" href=\"#test-for-complexity\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Is the code as simle as needed or does it solve problems we did not have in the first place? Are there dependencies that are not needed or out of date? Did the authors embrace all possible impacts on other parts of the code base?</p>\n<p>On the other hand, is the code <em>well written</em>, for instance by naming things properly and commenting parts that need to be commented and solely these?</p>\n</div>\n<div class=\"section\" id=\"is-the-code-solid\">\n<h3>Is the code solid?<a class=\"headerlink\" href=\"#is-the-code-solid\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Do some <em>destructive tests</em> with overly long texts, wrong typed user input, missing parameters. Does it work with the content management system (as opposite of: works only with the test files). If we have a module, how does this work on the website? Can multiple instances of the module placed on one page? Test for quantity: does the module work on a vast variety of page types and environments?</p>\n</div>\n<div class=\"section\" id=\"test-for-accessibility\">\n<h3>Test for accessibility<a class=\"headerlink\" href=\"#test-for-accessibility\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Are the a11y tests written? Test the code with a11y plug-ins in the browser. Test with at least with <em>Voice Over</em> and look for semantic markup and WAI-ARIA landmarks and attributes if needed. How does the module behave when we change font-size on the user side or when high contrast mode is activated? Test all this in a mobile and desktop environment.</p>\n</div>\n<div class=\"section\" id=\"test-for-performance\">\n<h3>Test for performance<a class=\"headerlink\" href=\"#test-for-performance\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Does the code lower the overall performance of the webpage? What could be done to perform better, where can things be spared or omitted, which tactics regarding dom access, page re-/rendering and file loading can be used? Are all best practices considered?</p>\n</div>\n<div class=\"section\" id=\"test-for-security\">\n<h3>Test for security<a class=\"headerlink\" href=\"#test-for-security\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Does the code in any manner introduce security problems for the user or its data or open the site for attacks like cross-site scripting and the like?</p>\n</div>\n</div>\n<div class=\"section\" id=\"how-do-we-handle-code-reviews\">\n<h2>How do we handle code reviews<a class=\"headerlink\" href=\"#how-do-we-handle-code-reviews\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The code we write is owned by all the authors and team members but at the same time, every pull request needs to be respected as a contribution of the individual to the collective outcome. Often there is no right or wrong, just taste but often it is completely the other way round. For many contentious issues we developed rules to obey but apart from this, all coders foster their own style. To respect the approach of others and on the other side to not get defensive about change requests is the challenge of every code review.</p>\n<p>Requester and reviewer need to meet one another midway. To help us on this way, we recommend the following approach:</p>\n<ul class=\"simple\">\n<li><p>as the reviewer: reserve enough time for the PR and give it your full attention</p></li>\n<li><p>as requester: be open and available for questions</p></li>\n<li><p>use the reviewing tools</p></li>\n<li><p>sequential arrangement: first discuss things that you do not understand, then parts that do not work, at last questions of coding style and code quality</p></li>\n<li><p>communicate before requesting changes</p></li>\n<li><p>do not request changes if there is no reason</p></li>\n<li><p>learn from the code, learn from the discussion, learn from the requested changes</p></li>\n<li><p>explain everything</p></li>\n<li><p>plan changes and the future of the feature together, plan the deployment and the upcoming quality check by other departments</p></li>\n</ul>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"]], "sourcename": "practices/peer-code-reviews.md.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">How we use and conduct pull requests and peer code reviews</a><ul>\n<li><a class=\"reference internal\" href=\"#how-pull-requests-are-handled\">How pull requests are handled</a></li>\n<li><a class=\"reference internal\" href=\"#what-things-need-to-be-done-before-code-is-merged\">What things need to be done before code is merged</a><ul>\n<li><a class=\"reference internal\" href=\"#all-code-should-be-tested\">All code should be tested</a></li>\n<li><a class=\"reference internal\" href=\"#all-code-must-be-valid\">All code must be valid</a></li>\n<li><a class=\"reference internal\" href=\"#the-outcome-must-work-in-all-targeted-browsers\">The outcome must work in all targeted browsers</a></li>\n<li><a class=\"reference internal\" href=\"#the-coding-guidelines-must-be-followed\">The coding guidelines must be followed</a></li>\n<li><a class=\"reference internal\" href=\"#the-definition-of-done-must-be-fulfilled\">The definition of done must be fulfilled</a></li>\n<li><a class=\"reference internal\" href=\"#the-non-functional-requirements-should-be-fulfilled\">The non-functional requirements should be fulfilled</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#what-should-be-checked-during-code-review\">What should be checked during code review</a><ul>\n<li><a class=\"reference internal\" href=\"#is-the-code-comprehensible\">Is the code comprehensible?</a></li>\n<li><a class=\"reference internal\" href=\"#test-for-complexity\">Test for complexity</a></li>\n<li><a class=\"reference internal\" href=\"#is-the-code-solid\">Is the code solid?</a></li>\n<li><a class=\"reference internal\" href=\"#test-for-accessibility\">Test for accessibility</a></li>\n<li><a class=\"reference internal\" href=\"#test-for-performance\">Test for performance</a></li>\n<li><a class=\"reference internal\" href=\"#test-for-security\">Test for security</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#how-do-we-handle-code-reviews\">How do we handle code reviews</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".md", "current_page_name": "practices/peer-code-reviews", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}